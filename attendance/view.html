---
title: FIRSTÂ® Alumni &amp; Mentors Network at Michigan
---
<!DOCTYPE html>
<html lang='en'>
<head>
    {% include title-styles.html %}
    <link rel=-'stylesheet' href='//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.css'>
</head>
<body>
    {% include header.html %}
<!-- 
    - export to csv
    - click button to see who do 4 meetings: "SELECT uniqname, COUNT(*) FROM attendance GROUP BY uniqname HAVING COUNT(*) > 3;"
-->
    <div class='w-50 mx-auto uniqname-search d-flex justify-content-center'>
        <input id='uniqname' type='text' placeholder='uniqname'/>
        <button type="button" class="btn btn-primary" data-toggle="modal" id="sendUniqname">Submit</button>
    </div>

    <div class="mx-auto w-50 d-flex justify-content-center">
        <table class="table" id="uniqname-meetings">
            <thead>
                <tr>
                    <th scope="col">Meeting Date</th>
                    <th scope="col">Type</th>
                </tr>
            </thead>
            <tbody id="uniqname-meeting-body">

            </tbody>
        </table>
    </div>

    <div style="overflow-x: scroll;" class="w-75 mx-auto">
        <table class="table all-meetings">
            <thead>
                <tr>
                    <th scope="col">Meeting Date</th>
                    <th scope="col">Type</th>
                    <th scope="col">Description</th>
                    <th scope="col">Attendees (uniqnames)</th>
                </tr>
            </thead>
            <tbody id="meeting-body">

            </tbody>
        </table>
    </div>

    {% include footer.html %}
    {% include scripts.html %}
    <script>
        let monthIdxToString = {
            0: "Jan", 1: "Feb", 2: "Mar", 3: "Apr",
            4: "May", 5: "June", 6: "July", 7: "Aug",
            8: "Sep", 9: "Oct", 10: "Nov", 11: "Dec"
        }
        let sortMeetings = (meetings) => {
            meetings.sort((a,b) => {
                return a.meeting_id < b.meeting_id;
            });
            return meetings;
        };

        $(() => {
            $('#uniqname-meetings').hide();

            fetch("http://backend.famnm.club/meeting")
            .then( (res) => {
                if (!res.ok) throw Error(res.statusText);
                return res.json();
            })
            .then(sortMeetings)
            .then(data => {
                
                // console.log(data);
                data.forEach(meeting => {
                    let meetDay = new Date(meeting.day);

                    $('#meeting-body').append($(`
                    <tr id="meeting-${meeting.meeting_id}">
                        <th>${monthIdxToString[meetDay.getUTCMonth()]} ${meetDay.getUTCDate()} ${meetDay.getUTCFullYear()}</th>
                        <td>${meeting.type}</td>
                        <td>${meeting.description}</td>
                        <td id="attendees-${meeting.meeting_id}">Loading...</td>
                    </tr>`));
                })
                data.forEach(meeting => {
                    fetch(`http://backend.famnm.club/attendance/meeting/${meeting.meeting_id}`)
                    .then(res => {
                        if (!res.ok) throw Error(res.statusText);
                        return res.json();
                    }).then(attendees => {
                        $(`#attendees-${meeting.meeting_id}`).text(attendees.map(a => a.uniqname).join(", "));
                    });
                })
            })
            .catch(console.log);

            let populateUniqname = () => {
                $('#uniqname-meetings').show();
                const uniqname = $('#uniqname').val();
                $('#uniqname').val('');
                $('#uniqname-meeting-body').empty();

                fetch(`http://backend.famnm.club/attendance/uniqname/${uniqname}`)
                .then( (res) => {
                    if (!res.ok) throw Error(res.statusText);
                    return res.json();
                })
                .then(sortMeetings)
                .then((meetings) => {
                    meetings.forEach(meeting => {
                        $('#uniqname-meeting-body').append($(`
                        <tr id="uniqname-meeting-${meeting.meeting_id}">
                            <th id="date-uniqname-meeting-${meeting.meeting_id}">Loading...</th>
                            <td id="type-uniqname-meeting-${meeting.meeting_id}">Loading...</td>
                        </tr>`));
                    });

                    meetings.forEach(meeting => {
                        fetch(`http://backend.famnm.club/meeting/${meeting.meeting_id}`)
                        .then(res => {
                            if (!res.ok) throw Error(res.statusText);
                            return res.json();
                        })
                        .then(fullMeeting => {
                            // console.log(fullMeeting);
                            let meetDay = new Date(fullMeeting[0].day);
                            $(`#type-uniqname-meeting-${meeting.meeting_id}`).text(fullMeeting[0].type);
                            $(`#date-uniqname-meeting-${meeting.meeting_id}`).text(`${monthIdxToString[meetDay.getUTCMonth()]} ${meetDay.getUTCDate()} ${meetDay.getUTCFullYear()}`);
                        });
                    })
                })
                .catch(console.log);
            }

            $('#uniqname').keypress((e) => {
                if (e.keyCode == 13){populateUniqname();}
            });

            $('#sendUniqname').click(populateUniqname);
        });
    </script>
</body>
</html>
